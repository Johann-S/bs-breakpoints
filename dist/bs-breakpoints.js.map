{"version":3,"file":"bs-breakpoints.js","sources":["../src/polyfill.js","../src/utility.js","../src/index.js"],"sourcesContent":["(() => {\n  // Add polyfill for Custom Events\n  function CustomEvent (ev, params) {\n    const evt = document.createEvent('CustomEvent')\n    params = params || { bubbles: false, cancelable: false, detail: undefined }\n    evt.initCustomEvent(ev, params.bubbles, params.cancelable, params.detail)\n    return evt\n  }\n\n  if (typeof window.CustomEvent !== 'function') {\n    CustomEvent.prototype = window.Event.prototype\n    window.CustomEvent = CustomEvent\n  }\n})()\n","const getBreakpointsCssProps = () => {\n  return Array.from(document.styleSheets)\n    .filter(\n      sheet =>\n        sheet.href === null || sheet.href.startsWith(window.location.origin)\n    )\n    .reduce(\n      (acc, sheet) =>\n        (acc = [\n          ...acc,\n          ...Array.from(sheet.cssRules).reduce(\n            (def, rule) =>\n              (def =\n              rule.selectorText === ':root'\n                ? [\n                  ...def,\n                  ...Array.from(rule.style).filter(name =>\n                    name.startsWith('--breakpoint')\n                  )\n                ]\n                : def),\n            []\n          )\n        ]),\n      []\n    )\n}\n\nexport { getBreakpointsCssProps }\n","import './polyfill'\r\nimport { getBreakpointsCssProps } from './utility'\r\n\r\nconst defaultBreakPoints = {\r\n  xSmall: {\r\n    min: 0,\r\n    max: 575\r\n  },\r\n  small: {\r\n    min: 576,\r\n    max: 767\r\n  },\r\n  medium: {\r\n    min: 768,\r\n    max: 991\r\n  },\r\n  large: {\r\n    min: 992,\r\n    max: 1199\r\n  },\r\n  xLarge: {\r\n    min: 1200,\r\n    max: Infinity\r\n  }\r\n}\r\n\r\nlet breakPoints = {}\r\n\r\n// Backward compatibility: default breakpoints naming\r\nconst nameMapping = {\r\n  xs: 'xSmall',\r\n  sm: 'small',\r\n  md: 'medium',\r\n  lg: 'large',\r\n  xl: 'xLarge'\r\n}\r\n\r\nlet breakPointsDetected = false\r\nlet currentBreakpoint = null\r\n\r\nconst Events = {\r\n  INIT: 'init.bs.breakpoint',\r\n  NEW: 'new.bs.breakpoint'\r\n}\r\n\r\nconst getJQuery = () => window.jQuery\r\n\r\nconst getPropsValue = () => {\r\n  return getBreakpointsCssProps().map((prop) => {\r\n    return {\r\n      name: prop.replace('--breakpoint-', ''),\r\n      value: parseInt(\r\n        window\r\n          .getComputedStyle(document.documentElement)\r\n          .getPropertyValue(prop),\r\n        10\r\n      )\r\n    }\r\n  })\r\n}\r\n\r\nconst getBreakPoints = () => {\r\n  // get breakpoints from Bootstrap CSS variables\r\n  const propsVal = getPropsValue()\r\n\r\n  if (propsVal.length) {\r\n    for (const bp in propsVal) {\r\n      const key = nameMapping[propsVal[bp].name]\r\n        ? nameMapping[propsVal[bp].name]\r\n        : propsVal[bp].name\r\n      const nextItem = parseInt(bp) + 1\r\n      key in breakPoints || (breakPoints[key] = {})\r\n      // update Breakpoints\r\n      breakPoints[key].min = propsVal[bp].value\r\n      breakPoints[key].max = propsVal[nextItem]\r\n        ? propsVal[nextItem].value - 1\r\n        : Infinity\r\n    }\r\n  } else {\r\n    // If there are no css variables get the default breakpoints\r\n    breakPoints = defaultBreakPoints\r\n  }\r\n\r\n  breakPointsDetected = true\r\n}\r\n\r\nconst _detectBreakPoint = () => {\r\n  const widthWindow = Math.max(\r\n    document.documentElement.clientWidth,\r\n    window.innerWidth || 0\r\n  )\r\n\r\n  for (const key in breakPoints) {\r\n    if (\r\n      widthWindow <= breakPoints[key].max &&\r\n      widthWindow >= breakPoints[key].min\r\n    ) {\r\n      return key\r\n    }\r\n  }\r\n\r\n  return currentBreakpoint\r\n}\r\n\r\nconst dispatchBreakpoint = (breakPointKey, eventName = Events.NEW) => {\r\n  if (!currentBreakpoint || currentBreakpoint !== breakPointKey) {\r\n    currentBreakpoint = breakPointKey\r\n    const $ = getJQuery()\r\n\r\n    if ($) {\r\n      const $event = $.Event(eventName, {\r\n        breakpoint: breakPointKey\r\n      })\r\n\r\n      $(window).trigger($event)\r\n    } else {\r\n      const event = new window.CustomEvent(eventName, {\r\n        detail: breakPointKey\r\n      })\r\n\r\n      window.dispatchEvent(event)\r\n    }\r\n  }\r\n}\r\n\r\nconst bsBreakpoints = {\r\n  init () {\r\n    getBreakPoints()\r\n    dispatchBreakpoint(_detectBreakPoint(), Events.INIT)\r\n\r\n    window.addEventListener('resize', () => {\r\n      dispatchBreakpoint(_detectBreakPoint())\r\n    })\r\n  },\r\n\r\n  detectBreakpoint () {\r\n    if (!breakPointsDetected) {\r\n      getBreakPoints()\r\n    }\r\n\r\n    currentBreakpoint = _detectBreakPoint()\r\n    return currentBreakpoint\r\n  },\r\n\r\n  getCurrentBreakpoint () {\r\n    return currentBreakpoint\r\n  }\r\n}\r\n\r\nexport default bsBreakpoints\r\n"],"names":["CustomEvent","ev","params","evt","document","createEvent","bubbles","cancelable","detail","undefined","initCustomEvent","window","prototype","Event","getBreakpointsCssProps","Array","from","styleSheets","filter","sheet","href","startsWith","location","origin","reduce","acc","cssRules","def","rule","selectorText","style","name","defaultBreakPoints","xSmall","min","max","small","medium","large","xLarge","Infinity","breakPoints","nameMapping","xs","sm","md","lg","xl","breakPointsDetected","currentBreakpoint","Events","INIT","NEW","getJQuery","jQuery","getPropsValue","map","prop","replace","value","parseInt","getComputedStyle","documentElement","getPropertyValue","getBreakPoints","propsVal","length","bp","key","nextItem","_detectBreakPoint","widthWindow","Math","clientWidth","innerWidth","dispatchBreakpoint","breakPointKey","eventName","$","$event","breakpoint","trigger","event","dispatchEvent","bsBreakpoints","init","addEventListener","detectBreakpoint","getCurrentBreakpoint"],"mappings":"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"}